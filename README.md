# Local Illustlation Image Files Searcher
## What's This?
- Local illustration image files search engine with ML technique
  - can be used for photos. but flexible photo search is offered by Google Photos or etc :)
- Search capabilities of cloud photo album services towards illustration image files are poor for some reason
- So, I wrote simple scripts

## Method
- CLIP ViT model is used for generating latent representation from image files and query text
  - Faiss is used for creating index of latent representation of image files
- ( Web UI is implemented with StreamLit )

## Usage
- $ pip install -r requirements.txt
- $ python gen-clip-vector-index.py --dir "IMAGE FILES CONTAINED DIR PATH"
  - The script searches directory structure recursively :)
  - This takes quite a while...
    - About 1 file/s at middle spec desktop PC (GPU is not used)
      - AMD Ryzen 7 5700X 8-Core Processor 4.50 GHz
    - You may speed up with editing the script to use :)
      - For example, you can use GPU for CLIP model inference 
- $ streamlit run web-ui-image-search.py
  - Search app is opend on your web browser

## Attention
- File pathes cahactor code 
  - If file path contains charactors which can't be contered to Unicode or utf-8, scripts may ouput error message at processing the file
  - But, it doesn't mean that your script usage is wrong. Though these files is ignored or not displayed at Web UI :|
    - This is problem of current implentation. When you use scripts on Windows and charactor code of directory/file names isn't utf-8, the problem may occur

## TODO
- [x] Search on latent representation generated by CLIP model such as [this](https://huggingface.co/laion/CLIP-ViT-H-14-laion2B-s32B-b79K)
  - Not doing tagging
  - Reference: ["Image Search app with CLIP+Faiss+Streamlit - OPTiM Tech Blog"](https://tech--blog-optim-co-jp.translate.goog/entry/2022/07/04/100000?_x_tr_sl=ja&_x_tr_tl=en&_x_tr_hl=ja&_x_tr_pto=wapp)
- [ ] Incremental index updating at image files increasing
- [ ] Similar image search with specifying target image file 
- [ ] Making binary package of this app which doesn't need python environment building
